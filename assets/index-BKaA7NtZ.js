const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CgNQmkMG.js","assets/vendor-react-antd-BzOEyUGj.js","assets/vendor-others-B_SqjRtK.js","assets/vendor-dayjs-BMl2ZANK.js","assets/SettingsDrawer-BtLGbDUZ.js","assets/StudentsList-BiL01Fqj.js","assets/TemplateEditor-M2kzvMRN.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,s,n)=>((t,s,n)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n)(t,"symbol"!=typeof s?s+"":s,n);import{r as s,j as n,M as o,L as r,R as i,B as a,D as c,F as l,t as u,a as d,C as m,b as h,I as p,S as g,c as f,d as j,e as y,f as x,g as S,A as b,h as v,i as k,T as _,k as T,l as M,m as E,n as I,o as C,p as O,q as w,s as N,u as R,z as q,v as L}from"./vendor-react-antd-BzOEyUGj.js";import{C as P,D}from"./vendor-others-B_SqjRtK.js";import{d as V}from"./vendor-dayjs-BMl2ZANK.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const A=class e{constructor(){t(this,"currentVersion"),t(this,"versionInfos",[]),t(this,"updateModalVisible",!1),this.currentVersion="0.4.0"}static getInstance(){return e.instance||(e.instance=new e),e.instance}async checkForUpdates(){try{const e=localStorage.getItem("version"),t=await fetch("version.config.json"),s=await t.json();return(!e||P(this.currentVersion,e)>0)&&(this.versionInfos=s.filter((t=>P(t.version,e||"0.0.0")>0)),localStorage.setItem("version",this.currentVersion),this.updateModalVisible=!0,!0)}catch(e){return!1}}closeUpdateModal(){this.updateModalVisible=!1,this.versionInfos=[]}getCurrentVersion(){return this.currentVersion}getUpdateInfo(){return this.versionInfos}isUpdateModalVisible(){return this.updateModalVisible}};t(A,"instance");let F=A;const Q=()=>{const e=F.getInstance(),[t,c]=s.useState([]),[l,u]=s.useState(!1);s.useEffect((()=>{e.checkForUpdates().then((()=>{e.isUpdateModalVisible()&&(u(!0),c(e.getUpdateInfo().reverse()))}))}),[e,t]);const d=()=>{e.closeUpdateModal(),u(!1)};return n.jsx(o,{open:l,title:n.jsxs("span",{children:["已更新 当前版本: ",e.getCurrentVersion()]}),onOk:d,footer:[n.jsx(a,{type:"primary",onClick:d,children:"确认"},"submit")],children:l&&n.jsx(r,{itemLayout:"vertical",dataSource:t,renderItem:e=>n.jsxs(r.Item,{children:[n.jsx(r.Item.Meta,{title:e.version,description:e.description}),e.updateInfo.map(((e,t)=>n.jsxs("p",{children:[n.jsx(i,{style:{marginRight:5}}),e]},t)))]})})})},$={},Y=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),s=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));n=Promise.allSettled(t.map((e=>{if((e=function(e){return"/"+e}(e))in $)return;$[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":"modulepreload",t||(o.as="script"),o.crossOrigin="",o.href=e,s&&o.setAttribute("nonce",s),document.head.appendChild(o),t?new Promise(((t,s)=>{o.addEventListener("load",t),o.addEventListener("error",(()=>s(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function o(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then((t=>{for(const e of t||[])"rejected"===e.status&&o(e.reason);return e().catch(o)}))},U=class e{constructor(){t(this,"requestQueue",[]),t(this,"activeRequests",0),t(this,"processing",!1),t(this,"requestsThisSecond",0),t(this,"requestsThisMinute",0),t(this,"lastSecond",0),t(this,"lastMinute",0),t(this,"throttleListeners",[]),this.init(),e.instance=this}static getInstance(){return e.instance}init(){e.messages={model:e.model,messages:[],stream:!0,max_tokens:16384,stop:null,temperature:.7,top_p:1,top_k:50,frequency_penalty:.5,n:1},e.option={method:"POST",headers:{Authorization:`Bearer ${e.token}`,"Content-Type":"application/json"},body:null};const t=localStorage.getItem("api_key");t&&e.setToken(t),e.getModelList()}static setToken(t){e.token=t}static tokenReady(){return void 0!==e.token&&""!==e.token&&null!==e.token}static getMackToken(){return`已存在令牌:${e.token.slice(0,4)} ***……*** ${e.token.slice(-6)}`}static setMessageBody(){e.option.headers.Authorization=`Bearer ${e.token}`,e.option.body=JSON.stringify(e.messages)}addThrottleListener(e){return this.throttleListeners.push(e),()=>{this.throttleListeners=this.throttleListeners.filter((t=>t!==e))}}notifyThrottleListeners(e,t){this.throttleListeners.forEach((s=>s(e,t)))}getThrottleStatus(){const t=Math.floor(Date.now()/1e3),s=Math.floor(t/60);t!==this.lastSecond&&(this.lastSecond=t,this.requestsThisSecond=0),s!==this.lastMinute&&(this.lastMinute=s,this.requestsThisMinute=0);const n=this.requestsThisSecond>=e.MAX_REQUESTS_PER_SECOND,o=this.requestsThisMinute>=e.MAX_REQUESTS_PER_MINUTE;return{isThrottled:n||o,shouldNotify:o,message:o?"每分钟请求数超过限制，请等待(由于API提供商的限制，每分钟最多只能发送10次请求)":"",requestsThisSecond:this.requestsThisSecond,requestsThisMinute:this.requestsThisMinute,availableConcurrent:Math.min(e.MAX_REQUESTS_PER_SECOND-this.requestsThisSecond,e.MAX_REQUESTS_PER_MINUTE-this.requestsThisMinute)}}async processQueue(){if(!this.processing&&0!==this.requestQueue.length){this.processing=!0;try{const t=this.getThrottleStatus();if(t.isThrottled){t.shouldNotify&&this.notifyThrottleListeners(!0,t.message);const s=t.requestsThisSecond>=e.MAX_REQUESTS_PER_SECOND?1e3:5e3;return void setTimeout((()=>{this.processing=!1,this.processQueue()}),s)}this.notifyThrottleListeners(!1,"");const s=t.availableConcurrent;if(s<=0)return void setTimeout((()=>{this.processing=!1,this.processQueue()}),1e3);const n=Math.min(s,this.requestQueue.length);this.requestsThisSecond+=n,this.requestsThisMinute+=n;const o=[];for(let e=0;e<n;e++){const e=this.requestQueue.shift();if(e){this.activeRequests++;const t=this._sendMessage(e.message,e.callback,e.onFinish).finally((()=>{this.activeRequests--,this.requestQueue.length>0&&!this.processing&&this.processQueue()}));o.push(t)}}this.processing=!1,this.requestQueue.length>0&&setTimeout((()=>this.processQueue()),50)}catch(t){this.processing=!1,setTimeout((()=>this.processQueue()),1e3)}}}async sendMessage(e,t,...s){this.requestQueue.push({message:s,callback:e,onFinish:t}),this.processQueue()}async _sendMessage(t,s,n){var o,r,i;e.messages.messages=e.messages.messages.concat(t),e.setMessageBody();const a=null==(o=(await fetch("https://api.siliconflow.cn/v1/chat/completions",e.option)).body)?void 0:o.getReader();if(!a)return;const c=new TextDecoder("utf-8");let l="",u="",d=0;for(;;){const{done:e,value:t}=await a.read();if(e||d>5){null==n||n();break}const o=c.decode(t,{stream:!0}).split("\n");for(const n of o)if(n.startsWith("data: ")){const e=n.slice(6);if("[DONE]"===e)break;try{const t=JSON.parse(e),n=null==(r=t.choices[0].delta.reasoning_content)?void 0:r.trim();n&&(u+=n,null==s||s(u,"reasoning_content"));const o=null==(i=t.choices[0].delta.content)?void 0:i.trim();o&&(l+=o,null==s||s(l,"content")),null===n&&null===o&&d++}catch(m){null==s||s(null)}}}}static async getModelList(){const t={method:"GET",headers:{Authorization:`Bearer ${e.token}`}};fetch("https://api.siliconflow.cn/v1/models?type=text",t).then((e=>e.json())).then((t=>{const s=t.data;e.model_list=s.map((e=>e.id))})).catch((e=>{}))}static setModel(t){e.model=t,e.messages.model=t,e.setMessageBody()}static getModel(){return e.model}};t(U,"instance"),t(U,"token"),t(U,"messages"),t(U,"option"),t(U,"model_list",[]),t(U,"model","Qwen/QwQ-32B"),t(U,"MAX_REQUESTS_PER_SECOND",3),t(U,"MAX_REQUESTS_PER_MINUTE",10);let B=U;window.API=new B;const H=B.getInstance,z={programming:{name:"编程",prompt:'## 角色定位：编程教师\n- 你是一位专注于小学和初高中学生编程教育的老师\n- 以下[方括号]内容为重点要求\n\n## 任务说明：\n- 我会提供课程基本信息（课程名称、时间、内容概览、教学目标）\n- 我会提供[单个]学生的课堂表现关键词\n- 请针对这位学生的表现进行[优化扩写]，控制在[150字左右]\n\n## 内容要求：\n- [仅需撰写课堂表现部分]，不要修改其他内容\n- 表现描述需[平衡指出优点和不足]，语气友善且有建设性\n- [重要提醒]：这是发给家长的反馈，请注意家长感受和情绪\n- [禁止添加虚构内容]，不要编造未提及的具体事件（如"某某最先完成..."）\n- 使用[宏观描述]而非具体课堂细节\n- 语言风格[自然口语化]，避免过于正式或官方的表述，要更亲切，接地气\n\n## 输出格式：\n请直接输出课堂表现文本，无需包含任何格式标记或额外内容'},robot:{name:"机器人",prompt:'## 角色定位：机器人(机械搭建)教师\n- 你是一位专注于小学和初高中学生机器人(机械搭建)的老师\n- 以下[方括号]内容为重点要求\n\n## 任务说明：\n- 我会提供课程基本信息（课程名称、时间、内容概览、教学目标）\n- 我会提供[单个]学生的课堂表现关键词\n- 请针对这位学生的表现进行[优化扩写]，控制在[150字左右]\n\n## 内容要求：\n- [仅需撰写课堂表现部分]，不要修改其他内容\n- 表现描述需[平衡指出优点和不足]，语气友善且有建设性\n- [重要提醒]：这是发给家长的反馈，请注意家长感受和情绪\n- [禁止添加虚构内容]，不要编造未提及的具体事件（如"某某最先完成..."）\n- 使用[宏观描述]而非具体课堂细节\n- 语言风格[自然口语化]，避免过于正式或官方的表述，要更亲切，接地气\n\n## 输出格式：\n请直接输出课堂表现文本，无需包含任何格式标记或额外内容'}};function J(){const e=localStorage.getItem("prompts");return e?JSON.parse(e):{}}function W(e){for(const[t,s]of Object.entries(e));localStorage.setItem("prompts",JSON.stringify(e))}function X(e,t){let s=e;t.courseName&&(s=s.replace(/{{courseName}}/g,`《${t.courseName}》`)),t.courseTime&&(s=s.replace(/{{courseTime}}/g,`@${t.courseTime[0].format("YYYY[年] MM[月]DD[日] HH:mm")} -> ${t.courseTime[1].format("HH:mm")}`)),t.courseContents&&(s=s.replace(/{{courseContents}}/g,t.courseContents.join(""))),t.courseObjectives&&(s=s.replace(/{{courseObjectives}}/g,t.courseObjectives.join(""))),t.signature&&(s=s.replace(/{{signature}}/g,t.signature));const n=t.customDate||V();return s=s.replace(/{{currentDate}}/g,n.format("YYYY[年] MM[月]DD[日]")),s=s.replace(/{{courseFeedback}}/g,t.courseFeedback??""),s}const K=s.lazy((()=>Y((()=>import("./index-CgNQmkMG.js")),__vite__mapDeps([0,1,2,3])))),G=s.lazy((()=>Y((()=>import("./SettingsDrawer-BtLGbDUZ.js")),__vite__mapDeps([4,1,2,3])))),Z=s.lazy((()=>Y((()=>import("./StudentsList-BiL01Fqj.js")),__vite__mapDeps([5,1,2,3])))),ee=s.lazy((()=>Y((()=>import("./TemplateEditor-M2kzvMRN.js")),__vite__mapDeps([6,1,2,3])))),te="**课程名称:** {{courseName}}\n\n**授课时间:** {{courseTime}}\n\n**课程内容概览:**\n{{courseContents}}\n\n**教学目标:**\n{{courseObjectives}}\n\n**课堂表现:**\n{{courseFeedback}}\n\n{{signature}}\n{{currentDate}}",se="**课程名称:** {{courseName}}\n\n**授课时间:** {{courseTime}}\n\n**课程内容概览:**\n{{courseContents}}\n\n**教学目标:**\n{{courseObjectives}}",{RangePicker:ne}=c,{useToken:oe}=u,re=({sendMessage:e,sendWarning:t})=>{const[o]=l.useForm(),[r]=l.useForm(),[i,c]=s.useState([]),[u,C]=s.useState({}),[O,w]=s.useState("programming"),[N,R]=s.useState({...z,...J()}),[q,L]=s.useState((P="class-name",JSON.parse(localStorage.getItem(P)??"[]")));var P;const A=s.useRef(!1),[F,Q]=s.useState(!1),[$,U]=s.useState(B.getModel),[W,re]=s.useState({}),{token:ie}=oe(),[ae,ce]=s.useState(!1),[le,ue]=s.useState(""),[de,me]=s.useState(!1),[he,pe]=s.useState(te),[ge,fe]=s.useState(te),je=s.useRef(se),[ye,xe]=s.useState("哆啦人工智能小栈");s.useEffect((()=>{const e=localStorage.getItem("class-history");e&&re(JSON.parse(e));const t=localStorage.getItem("feedback-template");t&&(pe(t),fe(t));const s=localStorage.getItem("signature");s&&xe(s);const n=setTimeout((()=>{(()=>{const e=[Y((()=>import("./index-CgNQmkMG.js")),__vite__mapDeps([0,1,2,3])),Y((()=>import("./SettingsDrawer-BtLGbDUZ.js")),__vite__mapDeps([4,1,2,3])),Y((()=>import("./StudentsList-BiL01Fqj.js")),__vite__mapDeps([5,1,2,3]))];Promise.all(e).catch((e=>{}))})()}),1e3),o=H().addThrottleListener(((e,t)=>{ce(e),ue(t)}));return()=>{clearTimeout(n),o()}}),[]);const Se=s.useCallback((t=>{navigator.clipboard.writeText(t),e("已导出到剪切板.")}),[e]),be=s.useCallback((()=>{const t=o.getFieldsValue();t.get=e=>t[e];const s=t.get("class-name"),n=t.get("course-name"),r=t.get("course-contents").map((e=>`- ${e.item}\n`)),i=t.get("course-objectives").map((e=>`- ${e.item}\n`)),a=t.get("course-time"),c=X(he,{courseName:n,courseTime:a,courseContents:r,courseObjectives:i,signature:ye});fe(c);const l=X(se,{courseName:n,courseTime:a,courseContents:r,courseObjectives:i});je.current=l;const u={time:{first:a[0].format("YYYY-MM-DD HH:mm"),last:a[1].format("YYYY-MM-DD HH:mm")}};localStorage.setItem(s,JSON.stringify(u));const d=function(e,...t){const s=JSON.parse(localStorage.getItem(e)??"[]");for(const n of t)s.includes(n)||s.push(n);return localStorage.setItem(e,JSON.stringify(s)),s}("class-name",s);L(d);const m={...W},h=new Set;for(const e in m){const{courseName:t}=m[e];h.add(t)}if(h.has(n))for(const e in m){const{courseName:s}=m[e];s===n&&(m[e]={courseName:n,courseContents:t.get("course-contents"),courseObjectives:t.get("course-objectives")})}else{m[D()]={courseName:n,courseContents:t.get("course-contents"),courseObjectives:t.get("course-objectives")}}if(Object.keys(m).length>10){delete m[Object.keys(m)[0]]}re(m),localStorage.setItem("class-history",JSON.stringify(m)),A.current=!0,e("课程信息提交成功！")}),[o,W,e,he,ye]),ve=s.useCallback((t=>{const s=localStorage.getItem(t);if(s){const e=JSON.parse(s),t=V(e.time.first),n=V(e.time.last),r=V().subtract(1,"week").day(t.day()).hour(t.hour()).minute(t.minute()),i=V().subtract(1,"week").day(n.day()).hour(n.hour()).minute(n.minute());o.setFieldsValue({"course-time":[r,i]})}else e("未找到该班级的数据, 请检查班级名是否正确.");const n=localStorage.getItem(`${t}_std`);if(n){const e=JSON.parse(n);c(e);const t={};for(const[s,n]of e.entries())t[s]={name:n,content:"",think_content:"",loading:!1,activated:!0};C(t)}}),[o,e]),ke=s.useCallback((()=>{const e=o.getFieldValue("class-name");e&&""!==e?ve(e):t("请先输入班级名.")}),[o,ve,t]),_e=s.useCallback((e=>{C((t=>{const s={...t};return s[e]={...s[e],loading:!0},s})),H().sendMessage(((t,s)=>{null!==s&&null!==t&&C((n=>{const o={...n};switch(s){case"content":o[e]={...o[e],content:t};break;case"reasoning_content":o[e]={...o[e],think_content:t}}return o}))}),(()=>{C((t=>{const s={...t};let n=s[e].content.replace(/(?:(?:\*\*)?课堂表现.*?(?::|：)(?:\*\*)?)(?::|：)?/,"");return n=n.replace(/\d{4}年 ?\d{1,2}月\d{1,2}(?:日|天)/,""),n=n.replace(/哆啦人工智能小栈/,""),n=n.trim(),s[e]={...s[e],content:n,loading:!1},s}))}),{content:N[O].prompt,role:"system"},{content:je.current,role:"user"},{content:`学员姓名: ${i[e]}`,role:"user"},{content:r.getFieldValue(["content",e])??"",role:"user"})}),[r,N,O,i]),Te=s.useCallback((()=>{if(!1!==A.current)if(!1!==B.tokenReady())for(const[e]of i.entries())u[e].activated&&_e(e);else t("请先输入API Key.");else t("请先完成课程信息的填写. 或再次点击提交按钮.")}),[_e,t,i,u]),Me=s.useCallback((e=>{const t=W[e];t&&o.setFieldsValue({"course-name":t.courseName,"course-contents":t.courseContents,"course-objectives":t.courseObjectives})}),[o,W]),Ee=s.useCallback((e=>{var t,s,n;const r=o.getFieldsValue(),a=e=>r[e],c=a("course-name"),l=(null==(t=a("course-contents"))?void 0:t.map((e=>`- ${e.item}\n`)))||[],d=(null==(s=a("course-objectives"))?void 0:s.map((e=>`- ${e.item}\n`)))||[],m=a("course-time");let h=`### ${i[e]}\n`;h+=X(ge,{courseName:c,courseTime:m,courseContents:l,courseObjectives:d,signature:ye,courseFeedback:(null==(n=u[e])?void 0:n.content)||""}),Se(h)}),[o,Se,ge,ye,i,u]),Ie=s.useCallback(((e,t)=>{localStorage.setItem("feedback-template",e),localStorage.setItem("signature",t),pe(e),fe(e),xe(t),me(!1)}),[]);return n.jsxs(n.Fragment,{children:[n.jsx(s.Suspense,{fallback:n.jsx("div",{children:"加载中..."}),children:n.jsx(G,{open:F,setOpen:Q,model:$,setModel:U,promptItems:N,setPromptItems:R,promptKey:O,setPromptKey:w,sendMessage:e})}),n.jsx(s.Suspense,{fallback:n.jsx("div",{children:"加载中..."}),children:n.jsx(ee,{isOpen:de,onClose:()=>me(!1),onSave:Ie,initialTemplate:he,initialSignature:ye,sendMessage:e})}),n.jsxs(d,{gutter:[72,64],children:[n.jsx(m,{span:2}),n.jsx(m,{span:16,children:n.jsx(l,{layout:"vertical",labelCol:{span:6},wrapperCol:{span:18},form:o,name:"course-info",autoComplete:"off",onFinish:be,onFieldsChange:()=>A.current=!1,initialValues:{items:[{}]},children:n.jsxs(h,{id:"course-info-card",size:"default",title:n.jsxs(n.Fragment,{children:[n.jsx(S,{style:{marginRight:"2rem",color:ie.colorPrimary}}),"课程信息"]}),style:{minWidth:"800px",boxShadow:"10px 10px 80px 10px rgba(0, 0, 0, 0.1)"},actions:[n.jsx(a,{style:{width:"100%"},type:"link",htmlType:"submit",children:"提交"},"submit"),n.jsxs(a,{type:"link",onClick:Te,children:[n.jsx(y,{}),"AI 优化"]},"ai"),n.jsx(a,{style:{width:"100%"},type:"link",onClick:ke,children:"导入"},"import"),n.jsxs(a,{style:{width:"100%"},type:"link",onClick:()=>{me(!0)},children:[n.jsx(x,{}),"自定义模板"]},"template")],children:[n.jsx(l.Item,{label:"班级名",name:"class-name",rules:[{required:!0}],children:n.jsx(p,{addonAfter:n.jsx(g,{defaultValue:null,notFoundContent:"无录入班级信息",placeholder:"选择班级",style:{width:120},onSelect:e=>{null!==e&&(ve(e),o.setFieldValue("class-name",e))},options:q.map((e=>({value:e,label:e})))})})}),n.jsx(l.Item,{label:"课程名称",name:"course-name",rules:[{required:!0}],children:n.jsx(p,{addonAfter:n.jsx(g,{defaultValue:null,notFoundContent:"无历史记录",placeholder:"历史记录",style:{width:120},onSelect:e=>{null!==e&&Me(e)},options:Object.keys(W).map((e=>({value:e,label:W[e].courseName})))})})}),n.jsx(l.Item,{label:"授课时间",name:"course-time",rules:[{required:!0}],children:n.jsx(ne,{showTime:{format:"HH:mm"},format:"YYYY-MM-DD HH:mm"})}),n.jsx(l.Item,{label:"课程内容",children:n.jsx(l.List,{name:"course-contents",rules:[{validator:async(e,t)=>{if(!t||t.length<1)return Promise.reject(new Error("至少需要有一个课程内容"))}}],children:(e,t,{errors:s})=>n.jsxs("div",{style:{display:"flex",flexDirection:"column",rowGap:16},children:[e.map((e=>n.jsxs(f,{children:[n.jsx(l.Item,{noStyle:!0,name:[e.name,"item"],rules:[{required:!0}],children:n.jsx(p,{style:{width:350},placeholder:"填写课程内容"})}),n.jsx(j,{onClick:()=>{t.remove(e.name)}})]},e.key))),n.jsx(a,{type:"dashed",onClick:()=>t.add(),block:!0,children:"+ 添加课程内容"}),n.jsx(l.ErrorList,{errors:s})]})})}),n.jsx(l.Item,{label:"教学目标",children:n.jsx(l.List,{name:"course-objectives",rules:[{validator:async(e,t)=>{if(!t||t.length<1)return Promise.reject(new Error("至少需要有一个课程目标"))}}],children:(e,t,{errors:s})=>n.jsxs("div",{style:{display:"flex",flexDirection:"column",rowGap:16},children:[e.map((e=>n.jsxs(f,{children:[n.jsx(l.Item,{noStyle:!0,name:[e.name,"item"],rules:[{required:!0}],children:n.jsx(p,{style:{width:350},placeholder:"填写课程内容"})}),n.jsx(j,{onClick:()=>{t.remove(e.name)}})]},e.key))),n.jsx(a,{type:"dashed",onClick:()=>t.add(),block:!0,children:"+ 添加课程内容"}),n.jsx(l.ErrorList,{errors:s})]})})})]})})}),n.jsx(m,{span:6,children:n.jsx(s.Suspense,{fallback:n.jsx("div",{children:"加载中..."}),children:n.jsx(K,{values_:i,activated_list_:Object.values(u).map((e=>e.activated)),onChange:e=>{const t=o.getFieldValue("class-name");if(!t)return;const s={...u};for(const[n,o]of e.entries())s[n]={name:o,content:"",think_content:"",loading:!1,activated:!0};C(s),c(e),localStorage.setItem(`${t}_std`,JSON.stringify(e))},onClear:()=>{C({}),c([])},onClick:(e,t)=>{},onActive:(e,t)=>{C((s=>{const n={...s};return n[e]={...n[e],activated:t[e]},n}))}})})}),n.jsx(m,{span:2}),n.jsx(m,{span:16,children:n.jsx(l,{form:r,name:"student-content",children:n.jsx(s.Suspense,{fallback:n.jsx("div",{children:"加载中..."}),children:n.jsx(Z,{students:i,students_info:u,handleSingleAIOptimize:_e,copyToClipboard:Se,copyStudentWithTemplate:Ee})})})}),n.jsx(m,{span:6,children:i.length>0&&n.jsx(b,{offsetTop:100,items:[{key:"course-info-card-anchor",title:"回到顶部",href:"#course-info-card"}].concat(i.map(((e,t)=>({key:`student-content-anchor-${t}`,title:e,href:`#student-content-${t}`}))))})})]}),ae&&n.jsxs("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:1e3,padding:"10px 15px",background:ie.colorWarning,borderRadius:"8px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",display:"flex",alignItems:"center",gap:"10px"},children:[n.jsx(v,{indicator:n.jsx(k,{style:{fontSize:18,color:"#fff"},spin:!0})}),n.jsx(_,{color:"warning",children:le})]}),n.jsx(T,{icon:n.jsx(M,{}),type:"primary",tooltip:"导出内容到剪切板.",style:{insetInlineEnd:24},onClick:()=>{var e,s,n;A.current||t("内容可能不完整, 或未点击提交按钮.");const r=o.getFieldsValue(),a=e=>r[e],c=a("course-name"),l=(null==(e=a("course-contents"))?void 0:e.map((e=>`- ${e.item}\n`)))||[],d=(null==(s=a("course-objectives"))?void 0:s.map((e=>`- ${e.item}\n`)))||[],m=a("course-time");let h="";for(const[t,o]of i.entries()){h+=`### ${o}\n`;h+=X(ge,{courseName:c,courseTime:m,courseContents:l,courseObjectives:d,signature:ye,courseFeedback:(null==(n=u[t])?void 0:n.content)||""}),h+="\n\n---\n"}Se(h)}}),n.jsx(E,{theme:{token:B.tokenReady()?void 0:{colorBgElevated:ie.colorError}},children:n.jsx(T,{icon:n.jsx(I,{style:{color:B.tokenReady()?void 0:"white"}}),tooltip:"展开设置面板.",style:{insetBlockEnd:128},onClick:()=>{Q(!0)}})})]})},ie=e=>{const t={marginLeft:"1em",marginRight:"1em",...e.style};return n.jsx(C,{...e,style:t,component:O})},{Header:ae,Footer:ce,Content:le}=w,{useToken:ue}=u,de=({sendMessage:e,sendWarning:t})=>{const{token:s}=ue();return n.jsxs(w,{style:{minHeight:"100vh"},children:[n.jsxs(ae,{style:{fontSize:"1.5rem"},children:[n.jsx(ie,{}),"课程反馈生成器"]}),n.jsx(le,{style:{padding:"50px 50px"},children:n.jsx(re,{sendMessage:e,sendWarning:t})}),n.jsx(ce,{style:{backgroundColor:s.colorBgBase},children:n.jsxs(N,{justify:"space-between",children:[n.jsx("span",{children:"Made by Iceriny"}),n.jsx("span",{style:{paddingRight:"100px"},children:"© Iceriny. 保留所有权利."})]})})]})};V.locale("en");const me=()=>{const[e,t]=R.useMessage(),o=s.useCallback(((t,s,n)=>{e.info(t,s,n)}),[e]),r=s.useCallback(((t,s,n)=>{e.warning(t,s,n)}),[e]);return n.jsxs(E,{locale:q,theme:{components:{Layout:{headerColor:"rgb(255, 255, 255)"}}},children:[t,n.jsx(de,{sendMessage:o,sendWarning:r}),n.jsx(Q,{})]})};L.createRoot(document.getElementById("root")).render(n.jsx(s.StrictMode,{children:n.jsx(me,{})}));export{B as A,z as P,W as s};
