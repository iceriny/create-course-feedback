import{r as e,t,j as s,y as o,s as a,E as n,S as l,I as r,G as i,d as c,H as d}from"./vendor-react-antd-BzOEyUGj.js";import{A as m,P as p,s as j}from"./index-BKaA7NtZ.js";import"./vendor-dayjs-BMl2ZANK.js";import{D as x}from"./vendor-others-B_SqjRtK.js";const{useToken:u}=t,g=e.memo((({open:e,setOpen:t,model:g,setModel:h,promptItems:y,setPromptItems:v,promptKey:f,setPromptKey:b,sendMessage:k})=>{const{token:S}=u();return s.jsx(o,{title:"设置",onClose:()=>{t(!1)},open:e,children:s.jsxs(a,{vertical:!0,gap:20,children:[s.jsxs(a,{gap:5,align:"center",justify:"space-between",children:[s.jsx(n.Text,{children:"模型:"}),s.jsx(l,{style:{width:"85%"},value:g,options:m.model_list.map((e=>({value:e,label:e}))),onSelect:e=>{h(e),m.setModel(e)}})]}),s.jsx(r,{addonBefore:"请输入API Key",placeholder:m.tokenReady()?m.getMackToken():"请输入",onChange:e=>{const t=e.target.value.trim();m.setToken(t),localStorage.setItem("api_key",t),k("API Key设置成功, 请刷新页面加载可用模型.")}}),s.jsxs(a,{vertical:!0,gap:5,justify:"space-between",children:[s.jsxs(a,{align:"center",justify:"space-between",children:[s.jsx(n.Text,{children:"提示词:"}),s.jsx(i,{title:"选择模板",children:s.jsx(l,{style:{width:"30%"},defaultValue:"programming",options:[...Object.entries(y).map((e=>({value:e[0],label:e[1].name}))),{value:"custom",label:"自定义"}],onSelect:e=>{if("custom"===e){const e=x();v({...y,[e]:{name:"请输入提示词名称",prompt:y[f].prompt}}),b(e)}else b(e)}})})]}),s.jsx(r,{addonBefore:"名称",addonAfter:s.jsxs(a,{gap:20,children:[s.jsx(c,{style:{fontSize:S.controlHeightXS,color:f in p?void 0:S.colorError},onClick:()=>{const e={...y};delete e[f],b(Object.keys(y)[0]),v(e),j(e)}}),s.jsx(d,{style:{fontSize:S.controlHeightXS,color:f in p?void 0:S.colorPrimary},onClick:()=>{j(y)}})]}),value:y[f].name,disabled:f in p,onChange:e=>{const t=e.target.value,s={...y,[f]:{...y[f],name:t}};v(s)}}),s.jsx(r.TextArea,{disabled:f in p,value:y[f].prompt,autoSize:{minRows:10,maxRows:15},title:"提示语",onChange:e=>{const t=e.target.value,s={...y,[f]:{...y[f],prompt:t}};v(s)}})]})]})})}));export{g as default};
